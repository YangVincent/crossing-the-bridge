# 如何提高校对准确性

## 当前方法：Few-Shot Learning（少样本学习）

我们使用"示例学习"的方法来指导 AI 更准确地检测错误。AI 会从示例中学习什么是错误，什么不是错误。

## 当前示例（在 background.js 中）

### 示例 1：字词错误
```
输入："河北省赵县的洨河上，有一座世界文明的石拱桥。"
输出：[{"text":"文明","type":"字词错误","suggestion":"闻名"}]
```

### 示例 2：标点误用  
```
输入："这是一个很好的想法,我们应该试试。"
输出：[{"text":",","type":"标点误用","suggestion":"，"}]
```

### 示例 3：无错误
```
输入："这座桥非常坚固，历经千年而不倒。"
输出：[]
```

## 如何添加更多示例

### 方法 1：直接在 background.js 中添加

找到 `detectErrors` 函数中的 `errorDetectionPrompt`，在"学习示例"部分添加新的示例：

```javascript
【示例4】
输入："你的新句子示例"
输出：[{"text":"错误词","type":"错误类型","suggestion":"正确词"}]
```

### 方法 2：使用专门的示例文件

我已经创建了 `proofreading-examples.js` 文件，你可以在其中添加更多分类的示例：

```javascript
{
  category: "字词错误",
  examples: [
    {
      text: "你的测试句子",
      errors: [{"text": "错误", "type": "字词错误", "suggestion": "正确"}],
      explanation: "为什么这是错误"
    }
  ]
}
```

## 提高准确性的关键点

### 1. **提供明确的对比示例**
- ✅ 好示例：同时包含正确和错误的例子
- ❌ 坏示例：只给错误例子

### 2. **针对特定错误类型**
如果发现 AI 经常错判某类错误，专门为这类错误添加 3-5 个示例：

```javascript
// 如果 AI 总是错判"文明"和"闻名"
【示例】
输入："这座桥世界文明。"
输出：[{"text":"文明","type":"字词错误","suggestion":"闻名"}]

【示例】
输入："中国是四大文明古国之一。"
输出：[]  // "文明"在这里是正确的
```

### 3. **使用真实的错误案例**
每次发现 AI 判断错误时，把这个案例添加为新示例。

### 4. **限制示例数量**
- 每类错误 2-4 个示例最佳
- 太多示例会让 AI 困惑或响应变慢
- 总示例数建议 6-12 个

### 5. **标点符号错误要具体**
```javascript
// ✅ 好示例：明确指出哪个标点错误
输入："你好,世界。"
输出：[{"text":",","type":"标点误用","suggestion":"，"}]

// ❌ 坏示例：模糊不清
输入："你好,世界。"
输出：[{"text":"标点","type":"标点误用","suggestion":"修正"}]
```

## 调试技巧

### 1. 查看控制台日志
打开开发者工具，查看 AI 的原始响应：
```
🔍 Detecting errors with LLM...
📝 Raw error detection response: [实际响应]
✅ Parsed errors: [解析结果]
```

### 2. 测试特定句子
如果某个句子总是判断错误，将它作为示例添加到提示词中。

### 3. 调整提示词语气
- **严格模式**："请只标记明确的错误"
- **宽松模式**："请标记所有可能的问题"

当前使用的是严格模式。

## 快速改进步骤

1. **收集错误案例**：记录 AI 误判的句子
2. **分析错误模式**：找出 AI 经常犯的错误类型
3. **添加针对性示例**：为每种错误模式添加 2-3 个示例
4. **测试验证**：用相同的句子重新测试
5. **迭代优化**：根据结果继续调整

## 示例模板

```javascript
【示例X】
输入："<你的测试句子>"
输出：[{"text":"<错误部分>","type":"<错误类型>","suggestion":"<建议修改>"}]
```

错误类型选项：
- `字词错误`
- `标点误用`
- `语法问题`
- `语序问题`

## 当前已知限制

1. **LLM 响应不稳定**：有时可能返回非 JSON 格式
2. **上下文理解**：只能检测句子内的错误，不能理解段落上下文
3. **主观判断**：对于风格性问题可能有不同判断

## 需要我帮助吗？

如果你发现具体的误判案例，请告诉我：
1. 输入的句子
2. 实际应该检测的错误
3. AI 当前的错误判断

我会帮你调整示例，提高准确性。
